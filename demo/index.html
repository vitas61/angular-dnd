<!DOCTYPE html>
<html lang="en" ng-app="app" style = "height: 100%">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Angular-DnD Basic Example</title>

<link rel="stylesheet" href="demo.css" />

<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.js"></script>


<link rel="stylesheet" href="../css/stylesheet.css" />
<script type="text/javascript" src = "../js/angular-dnd.js"></script>



    <script type="text/javascript">

    var app = angular.module('app', ['dnd']);

    app.controller('controller', function($scope){

        $scope.dragstart = function(){
	        console.log('dragstart', arguments);
        };

        $scope.drag = function(){
	        console.log('drag', arguments);
        };

        $scope.dragend = function(){
	        console.log('dragend', arguments);

	        if(!arguments[0]) $scope.dropped = false;
        };

        $scope.dragenter = function(dropmodel, dragmodel){
	        console.log( dropmodel);
	        $scope.active = dropmodel;
        };

        $scope.dragover = function(){
	        console.log('dragover', arguments);
        };

        $scope.dragleave = function(dropmodel, dragmodel){
	        $scope.active = undefined;
        };

        $scope.drop = function(dragmodel, model){
	        console.log('drop', arguments);
	        $scope.dropped = model;
        };

        $scope.click = function(isclick, dropmodel){
	        console.log('isclick ===', isclick, dropmodel);
        };
        
        $scope.isDropped = function(model){
	        return $scope.dropped === model;
        };
        
        $scope.isActive = function(model){
	        return $scope.active === model;
        };

        $scope.reset = function(){
            $scope.rect = {top:'20px', left:'240px', width: '100px', height: '100px'};
        }
        
        $scope.reset();
        
        $scope.dragmodel = 'drag'; 

        $scope.dropmodels = [ 'drop1', 'drop2', 'drop3' ]
    });

</script>

</head>



<body ng-controller="controller" style = "position: relative; height:100%;">
	<div style = "height: 100%; overflow: auto;">
	    <div class = "menu">

	        <a class = "button" href = "index.html">Basic example</a>
	        <a class = "button" href = "lasso.html">Lasso example</a>

	    </div>

	    <div class = "title" ng-click = "click($event)"> Basic example <br><em style = "font-size: 50%;">Draggable, Droppable, Rotatable, Resizable, Fittext...</em></div>

	    top: <input ng-model = 'rect.top' type="text">
	    left: <input ng-model = 'rect.left' type="text">
	    height: <input ng-model = 'rect.height' type="text">
	    width: <input ng-model = 'rect.width' type="text">
	    transform: <input ng-model = 'rect.transform' type="text">
	    
	    <button ng-click = "reset()">Reset</button>

		<div class = "dnd-container">
		    <div class = "draggable" style = "position: absolute;"
				ng-style = "{'line-height': rect.height}"
				ng-click = "click(!$dragged && !$resized && !$rotated, $dropmodel)"

		    	dnd-draggable = "true"
                dnd-draggable-opts = "{ns: 'area1', useAsPoint: true}"
                dnd-on-dragstart = "dragstart()"
                dnd-on-drag = "drag($dropmodel)"
                dnd-on-dragend = "dragend($dropmodel)"

                dnd-rotatable = "true"
                dnd-on-rotatestart = "dragstart()"
                dnd-on-rotate = "drag()"
                dnd-on-rotateend = "dragend()"

                dnd-resizable = "true"
                dnd-on-resizestart = "dragstart()"
                dnd-on-resize = "drag()"
                dnd-on-resizeend = "dragend()"

		        dnd-rect = "rect"
                dnd-fittext = "{width:rect.width, height:rect.height}"
                dnd-model = "dragmodel">

                Drag me

            </div>

		    <div 
		    	ng-repeat = "dropmodel in dropmodels"
				class = "dropzone"
				ng-class = "{dropped: isDropped(dropmodel), active: isActive(dropmodel)}"

                dnd-droppable = "true"
                dnd-droppable-opts = "{ns: 'area1'}"
                dnd-on-drop = "drop($dragmodel, dropmodel)"
                dnd-on-dragenter = "dragenter(dropmodel, $dragmodel)"
                dnd-on-dragleave = "dragleave(dropmodel, $dragmodel)"
                dnd-on-dragover = "dragover($dragmodel)"

                dnd-model = "dropmodel" >

		    </div>

		    <br><br>

		</div>

	</div>
</body>
</html>
